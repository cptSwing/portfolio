@keyframes streak-to-right {
    from {
        @apply z-20 opacity-0;
        transform: translateX(-200%);
    }
    to {
        @apply z-0 opacity-100;
        transform: translateX(0);
    }
}

@keyframes streak-to-left {
    from {
        @apply z-20 opacity-0;
        transform: translateX(200%);
    }
    to {
        @apply z-0 opacity-100;
        transform: translateX(0);
    }
}

@keyframes enter-from-left {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(0%);
    }
}

@keyframes enter-from-right {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(0%);
    }
}

@keyframes text-upwards {
    from {
        @apply origin-top opacity-0;
        transform: translateY(150%);
    }
    to {
        @apply scale-y-100 opacity-100;
        transform: translateY(0%);
    }
}

@keyframes height-to-full {
    from {
        max-height: var(--bar-height);
    }
    to {
        max-height: var(--content-height);
    }
}

@keyframes width-to-full {
    from {
        width: 0%;
    }
    to {
        width: var(--bar-width);
    }
}

@keyframes expand-corners {
    0% {
        clip-path: inset(var(--outside-clip-y) var(--outside-clip-x) var(--outside-clip-y) var(--outside-clip-x));
    }
    25% {
        clip-path: inset(var(--clip-final) var(--outside-clip-x) var(--clip-final) var(--outside-clip-x));
    }
    100% {
        clip-path: inset(var(--clip-final));
    }
}

@keyframes shrink-corners {
    0% {
        clip-path: inset(var(--clip-final));
    }
    75% {
        clip-path: inset(var(--clip-final) var(--outside-clip-x) var(--clip-final) var(--outside-clip-x));
    }
    100% {
        clip-path: inset(var(--outside-clip-y) var(--outside-clip-x) var(--outside-clip-y) var(--outside-clip-x));
    }
}

@keyframes outer-ring {
    0%,
    100% {
        transform: scale3d(1, 1, 1);
    }

    50% {
        transform: scale3d(1.2, 1.05, 1);
        filter: brightness(1.5);
    }
}

@keyframes bg-dash {
    to {
        stroke-dashoffset: 0;
        stroke-dasharray: 0.5;
        stroke-opacity: var(--bg-stroke-max-opacity);
        stroke-width: 0.1;
    }
}

@keyframes wipe-card-down-enter {
    0% {
        clip-path: inset(0 0 100% 0);
    }
    100% {
        clip-path: inset(0 0 0 0);
    }
}

@keyframes wipe-card-down-exit {
    0% {
        clip-path: inset(0 0 0 0);
    }
    100% {
        clip-path: inset(100% 0 0 0);
    }
}

@keyframes wipe-card-left-enter {
    0% {
        clip-path: inset(0 0 0 100%);
    }
    100% {
        clip-path: inset(0 0 0 0);
    }
}

@keyframes wipe-card-left-exit {
    0% {
        clip-path: inset(0 0 0 0);
    }
    100% {
        clip-path: inset(0 100% 0 0);
    }
}

@keyframes move-up-settle-down {
    0%,
    100% {
        scale: 1;
    }
    2%,
    80% {
        scale: 1.025;
    }
}

/** Clip Shape Animations */

/* Variables */

.animate-clip-shape-variables {
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    animation-fill-mode: forwards;
    animation-duration: var(--clip-shape-animation-duration);

    --hex-outer-radius: calc(var(--clip-shape-overall-height) / 2);
    --hex-half-outer-radius: calc(var(--hex-outer-radius) / 2); /* r*cos60 */
    --hex-inner-radius: calc(var(--hex-outer-radius) * sin(60deg)); /* r*sin60 */

    --hex-top-position: calc(var(--hex-outer-radius) - var(--hex-inner-radius));
    --hex-bottom-position: calc(100% - var(--hex-top-position));
    --percentage-of-hex-top-to-100vh: 6.7;
    --100-minus-percentage-of-hex-top: calc(100 - var(--percentage-of-hex-top-to-100vh));

    --inner-margin: 1rem; /* TODO calc this */
}

/** Remap function:
    remap "_value" from ["_low1", "_high1"] to ["_low2", "_high2"], so
    "vertical percentage" (= vh) from ["0", "100"] to ["(--clip-shape-tan-home) / 2", "-1 * (--clip-shape-tan-home) / 2"] (or vice versa)

                   always == _value                       always == 100
    calc( _low2 + (_value - _low1) * (_high2 - _low2) / (_high1 - _low1) )
*/

.animate-clip-shape-left-variables {
    @apply animate-clip-shape-variables;

    --path-left-home: polygon(
        calc(
                var(--clip-shape-width-home-left) +
                    (
                        var(--clip-shape-tan-home-offset) + var(--percentage-of-hex-top-to-100vh) *
                            (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-top-position) /* Top Right */,

        calc(
                var(--clip-shape-width-home-left) +
                    (var(--clip-shape-tan-home-offset) + 28 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100) +
                    var(--inner-margin)
            )
            28% /* Start Bulge */,

        calc(
                var(--clip-shape-width-home-left) +
                    (var(--clip-shape-tan-home-offset) + 31.5 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100)
            )
            31.5% /* Top of Bulge */,

        calc(
                var(--clip-shape-width-home-left) +
                    (var(--clip-shape-tan-home-offset) + 70 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100)
            )
            70% /* Bottom of Bulge */,

        calc(
                var(--clip-shape-width-home-left) +
                    (var(--clip-shape-tan-home-offset) + 75 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100) +
                    var(--inner-margin)
            )
            75% /* End Bulge */,

        calc(
                var(--clip-shape-width-home-left) +
                    (
                        var(--clip-shape-tan-home-offset) + var(--100-minus-percentage-of-hex-top) *
                            (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-bottom-position) /* Bottom Right */,

        calc(50% - var(--hex-half-outer-radius)) var(--hex-bottom-position) /* Bottom Left */,

        calc(50% - var(--hex-outer-radius)) 50% /* Absolute Left */,

        calc(50% - var(--hex-half-outer-radius)) var(--hex-top-position) /* Top Left */
    );

    --path-left-category: polygon(
        calc(
                var(--clip-shape-width-category-left) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + var(--percentage-of-hex-top-to-100vh) *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-top-position) /* Top Right */,

        calc(
                var(--clip-shape-width-category-left) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 18 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            18% /* Start Bulge */,

        calc(
                var(--clip-shape-width-category-left) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 20 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    )
            )
            20% /* Top of Bulge */,

        calc(
                var(--clip-shape-width-category-left) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 80 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    )
            )
            80% /* Bottom of Bulge */,

        calc(
                var(--clip-shape-width-category-left) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 82 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            82% /* End Bulge */,

        calc(
                var(--clip-shape-width-category-left) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + var(--100-minus-percentage-of-hex-top) *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-bottom-position) /* Bottom Right */,

        calc(2% + var(--hex-half-outer-radius)) var(--hex-bottom-position) /* Bottom Left */,

        2% 50% /* Absolute Left */,

        calc(2% + var(--hex-half-outer-radius)) var(--hex-top-position) /* Top Left */
    );

    --path-left-post: polygon(
        calc(
                var(--clip-shape-width-post-left) +
                    (var(--clip-shape-tan-post-offset) + 1 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            1% /* Top Right */,

        calc(
                var(--clip-shape-width-post-left) +
                    (var(--clip-shape-tan-post-offset) + 10 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            10% /* Start Bulge */,

        calc(
                var(--clip-shape-width-post-left) +
                    (var(--clip-shape-tan-post-offset) + 12.5 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100)
            )
            12.5% /* Top of Bulge */,

        calc(
                var(--clip-shape-width-post-left) +
                    (var(--clip-shape-tan-post-offset) + 87.5 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100)
            )
            87.5% /* Bottom of Bulge */,

        calc(
                var(--clip-shape-width-post-left) +
                    (var(--clip-shape-tan-post-offset) + 90 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            90% /* End Bulge */,

        calc(
                var(--clip-shape-width-post-left) +
                    (var(--clip-shape-tan-post-offset) + 99 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            99% /* Bottom Right */,

        1% 99% /* Bottom Left */,

        1% 5% /* Absolute Left */,

        calc(1% + var(--clip-shape-tan-post-offset)) 1% /* Top Left */
    );
}

.animate-clip-shape-right-variables {
    @apply animate-clip-shape-variables;

    --path-right-home: polygon(
        calc(
                var(--clip-shape-width-home-right) +
                    (
                        var(--clip-shape-tan-home-offset) + var(--percentage-of-hex-top-to-100vh) *
                            (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-top-position) /* Top Left */,

        calc(
                var(--clip-shape-width-home-right) +
                    (var(--clip-shape-tan-home-offset) + 29 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100) +
                    var(--inner-margin)
            )
            29% /* Begin Bulge */,
        calc(
                var(--clip-shape-width-home-right) +
                    (var(--clip-shape-tan-home-offset) + 32.5 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100)
            )
            32.5% /* Top of Bulge */,
        calc(
                var(--clip-shape-width-home-right) +
                    (var(--clip-shape-tan-home-offset) + 70 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100)
            )
            70% /* Bottom of Bulge */,
        calc(
                var(--clip-shape-width-home-right) +
                    (var(--clip-shape-tan-home-offset) + 75 * (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100) +
                    var(--inner-margin)
            )
            75% /* End Bulge */,

        calc(
                var(--clip-shape-width-home-right) +
                    (
                        var(--clip-shape-tan-home-offset) + var(--100-minus-percentage-of-hex-top) *
                            (var(--clip-shape-tan-home-offset-inverted) - var(--clip-shape-tan-home-offset)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-bottom-position) /* Bottom Left */,

        calc(50% + var(--hex-half-outer-radius)) var(--hex-bottom-position) /* Bottom Right */,
        calc(50% + var(--hex-outer-radius)) 50% /* Absolute Right */,
        calc(50% + var(--hex-half-outer-radius)) var(--hex-top-position) /* Top Right */
    );

    --path-right-category: polygon(
        calc(
                var(--clip-shape-width-category-right) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + var(--percentage-of-hex-top-to-100vh) *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-top-position) /* Top left */,

        calc(
                var(--clip-shape-width-category-right) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 18 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            18% /* Start Bulge */,
        calc(
                var(--clip-shape-width-category-right) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 20 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    )
            )
            20% /* Top of Bulge */,
        calc(
                var(--clip-shape-width-category-right) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 80 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    )
            )
            80% /* Bottom of Bulge */,
        calc(
                var(--clip-shape-width-category-right) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + 82 *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            82% /* End Bulge */,

        calc(
                var(--clip-shape-width-category-right) +
                    (
                        var(--clip-shape-tan-category-offset-inverted) + var(--100-minus-percentage-of-hex-top) *
                            (var(--clip-shape-tan-category-offset) - var(--clip-shape-tan-category-offset-inverted)) / 100
                    ) +
                    var(--inner-margin)
            )
            var(--hex-bottom-position) /* Bottom left */,

        calc(98% - var(--hex-half-outer-radius)) var(--hex-bottom-position) /* Bottom Right */,
        98% 50% /* Absolute Right */,
        calc(98% - var(--hex-half-outer-radius)) var(--hex-top-position) /* Top Right */
    );

    --path-right-post: polygon(
        calc(
                var(--clip-shape-width-post-right) +
                    (var(--clip-shape-tan-post-offset) + 1 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            1% /* Top Left */,

        calc(
                var(--clip-shape-width-post-right) +
                    (var(--clip-shape-tan-post-offset) + 10 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            10% /* Start Bulge */,

        calc(
                var(--clip-shape-width-post-right) +
                    (var(--clip-shape-tan-post-offset) + 12.5 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100)
            )
            12.5% /* Top of Bulge */,

        calc(
                var(--clip-shape-width-post-right) +
                    (var(--clip-shape-tan-post-offset) + 87.5 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100)
            )
            87.5% /* Bottom of Bulge */,

        calc(
                var(--clip-shape-width-post-right) +
                    (var(--clip-shape-tan-post-offset) + 90 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            90% /* End Bulge */,

        calc(
                var(--clip-shape-width-post-right) +
                    (var(--clip-shape-tan-post-offset) + 99 * (var(--clip-shape-tan-post-offset-inverted) - var(--clip-shape-tan-post-offset)) / 100) +
                    var(--clip-shape-width-home-inner-space)
            )
            99% /* Bottom Left */,

        calc(99% - var(--clip-shape-tan-post-offset)) 99% /* Bottom Right */,
        99% 95% /* Absolute Right */,
        99% 1% /* Top Right */
    );
}

/* Nav State */

.before\:animate-clip-shape-left-home::before {
    @apply animate-clip-shape-left-variables;
    animation-name: clip-shape-left-home;
}

@keyframes clip-shape-left-home {
    0% {
        clip-path: polygon(
            50% 25% /* Top Right */,
            50% 30% /* Start Bulge */,
            50% 35% /* Top of Bulge */,
            50% 65% /* Bottom of Bulge */,
            50% 70% /* End Bulge */,
            50% 75% /* Bottom Right */,
            45% 75% /* Bottom Left */,
            40% 50% /* Absolute Left */,
            45% 25% /* Top Left */
        );
    }

    100% {
        clip-path: var(--path-left-home);
    }
}

.before\:animate-clip-shape-right-home::before {
    @apply animate-clip-shape-right-variables;
    animation-name: clip-shape-right-home;
}

@keyframes clip-shape-right-home {
    0% {
        clip-path: polygon(
            50% 25% /* Top Left */,
            50% 30% /* Start Bulge */,
            50% 35% /* Top of Bulge */,
            50% 65% /* Bottom of Bulge */,
            50% 70% /* End Bulge */,
            50% 75% /* Bottom Left */,
            55% 75% /* Bottom Right */,
            60% 50% /* Absolute Right */,
            55% 25% /* Top Right */
        );
    }

    100% {
        clip-path: var(--path-right-home);
    }
}

/* Category State */

.before\:animate-clip-shape-left-category::before {
    @apply animate-clip-shape-left-variables;
    animation-name: clip-shape-left-category;
}

@keyframes clip-shape-left-category {
    0% {
        clip-path: var(--path-left-home);
    }

    100% {
        clip-path: var(--path-left-category);
    }
}

.before\:animate-clip-shape-left-category-reversed::before {
    @apply animate-clip-shape-left-variables;
    animation-name: clip-shape-left-category-reversed;
    animation-duration: calc(var(--clip-shape-animation-duration) / 2);
}

@keyframes clip-shape-left-category-reversed {
    0% {
        clip-path: var(--path-left-category);
    }

    100% {
        clip-path: var(--path-left-home);
    }
}

.before\:animate-clip-shape-right-category::before {
    @apply animate-clip-shape-right-variables;
    animation-name: clip-shape-right-category;
}

@keyframes clip-shape-right-category {
    0% {
        clip-path: var(--path-right-home);
    }

    100% {
        clip-path: var(--path-right-category);
    }
}

.before\:animate-clip-shape-right-category-reversed::before {
    @apply animate-clip-shape-right-variables;
    animation-name: clip-shape-right-category-reversed;
    animation-duration: calc(var(--clip-shape-animation-duration) / 2);
}

@keyframes clip-shape-right-category-reversed {
    0% {
        clip-path: var(--path-right-category);
    }

    100% {
        clip-path: var(--path-right-home);
    }
}

/* Post State */

.before\:animate-clip-shape-left-post::before {
    @apply animate-clip-shape-left-variables;
    animation-name: clip-shape-left-post;
}

@keyframes clip-shape-left-post {
    0% {
        clip-path: var(--path-left-category);
    }

    100% {
        clip-path: var(--path-left-post);
    }
}

.before\:animate-clip-shape-left-post-reversed::before {
    @apply animate-clip-shape-left-variables;
    animation-name: clip-shape-left-post-reversed;
    animation-duration: calc(var(--clip-shape-animation-duration) / 2);
}

@keyframes clip-shape-left-post-reversed {
    0% {
        clip-path: var(--path-left-post);
    }

    100% {
        clip-path: var(--path-left-category);
    }
}

.before\:animate-clip-shape-right-post::before {
    @apply animate-clip-shape-right-variables;
    animation-name: clip-shape-right-post;
}

@keyframes clip-shape-right-post {
    0% {
        clip-path: var(--path-right-category);
    }

    100% {
        clip-path: var(--path-right-post);
    }
}

.before\:animate-clip-shape-right-post-reversed::before {
    @apply animate-clip-shape-right-variables;
    animation-name: clip-shape-right-post-reversed;
    animation-duration: calc(var(--clip-shape-animation-duration) / 2);
}

@keyframes clip-shape-right-post-reversed {
    0% {
        clip-path: var(--path-right-post);
    }

    100% {
        clip-path: var(--path-right-category);
    }
}
