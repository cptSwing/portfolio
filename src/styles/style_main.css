/* @import './fonts.css'; */
/* @import './animations.css'; */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        @apply [--bg-color:--theme-bg-base] [--color-bars-no-post:--theme-secondary-300] [--color-bars-post:--theme-primary-500] [--color-primary-active-cat-bg:--theme-primary-300] [--color-primary-content-bg:--theme-primary-100] [--color-primary-inactive-cat-bg:--theme-primary-600] [--color-secondary-active-cat:--theme-secondary-400] [--color-secondary-inactive-cat:--theme-secondary-600];
        @apply bg-[--bg-color];
    }

    a {
        @apply text-[--theme-secondary-50] visited:text-[--theme-secondary-200] hover:underline;
    }

    h1 {
        @apply block font-protest-riot text-6xl;
    }

    h2 {
        @apply relative z-0 block font-dm-serif font-semibold [font-size:1.75rem] [line-height:2.125rem] sm:text-5xl;
    }

    h3 {
        @apply block font-besley text-xl sm:text-2xl;
    }

    h4 {
        @apply block font-besley text-xl;
    }

    h5 {
        @apply relative z-0 inline px-1 pb-0.5 font-barlow italic leading-none text-[--theme-secondary-600] underline underline-offset-2;
    }
}

@layer components {
    /* Adapted from https://css-tip.com/corner-only-border-image/ : */
    .nav-card-corners {
        @apply [--corner-inset-x:theme(spacing.3)] [--corner-inset-y:theme(spacing.3)] [--corner-outline-color:--theme-accent-200] [--corner-size:theme(spacing.2)] [--corner-thickness:theme(spacing[0.5])];
        @apply [mask:conic-gradient(at_var(--corner-size)_var(--corner-size),_theme(colors.transparent)_75%,_theme(colors.black)_0)_0_0_/_calc(100%-var(--corner-size))_calc(100%-var(--corner-size))];
        /* Cut bottom left corner: */
        /* @apply [clip-path:polygon(0_0,_100%_0,_100%_100%,_var(--corner-inset)_100%,_0_var(--corner-inset))]; */
        @apply absolute bottom-[--corner-inset-y] left-[--corner-inset-x] right-[--corner-inset-x] top-[--corner-inset-y] outline outline-[length:--corner-thickness] outline-offset-[calc(-1*var(--corner-thickness))] outline-[color:--corner-outline-color];
        @apply hover:[--corner-outline-color:--theme-secondary-400];
    }

    .fake-border-bg {
        @apply [--fake-border-color:theme(colors.gray.500/50%)] [--fake-border-width-side:calc(theme(spacing.1)/2)];
        @apply absolute -bottom-[--fake-border-width-side] -left-[--fake-border-width-side] -right-[--fake-border-width-side] -top-[--fake-border-width-side] bg-gradient-to-r from-[--fake-border-color] to-[--fake-border-color];
    }

    /* .link-in-content {
        @apply after:a-svg-mask after:invisible after:-mr-1 after:mb-1 after:inline-block after:size-2 after:bg-current hover:after:visible;
    } */

    .headline-bg {
        @apply after:absolute after:left-0 after:-z-10 after:size-full after:bg-neutral-50;
    }

    .headline-skewed-bg {
        @apply after:absolute after:left-0 after:-z-10 after:size-full after:-skew-x-6 after:bg-neutral-50;
    }

    .rotate-text {
        @apply writing-mode-vert-lr rotate-180;
    }
}

@layer utilities {
    .a-svg-mask {
        mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25" /></svg>');
        mask-repeat: no-repeat;
        mask-position: center;
    }

    .writing-mode-vert-lr {
        writing-mode: vertical-lr;
    }

    .writing-mode-vert-rl {
        writing-mode: vertical-rl;
    }

    .scroll-gutter-both {
        scrollbar-gutter: stable both-edges;
    }

    .scroll-gutter {
        scrollbar-gutter: stable;
    }

    .perspective-1000px {
        perspective: 1000px;
    }

    .parallax-static {
        transform: translateZ(var(--parallax-translateZ));
        transform-style: preserve-3d;
        transition: transform 1.5s cubic-bezier(0.05, 0.5, 0, 1);
    }

    .parallax-rotXY {
        transform: translateZ(var(--parallax-translateZ)) rotate3d(1, 0, 0, var(--parallax-rotateX)) rotate3d(0, 1, 0, var(--parallax-rotateY));
        transform-style: preserve-3d;
        transition: transform 1.5s cubic-bezier(0.05, 0.5, 0, 1);
    }

    .parallax-rotX {
        transform: translateZ(var(--parallax-translateZ)) rotate3d(1, 0, 0, var(--parallax-rotateX));
        transform-style: preserve-3d;
        transition: transform 1.5s cubic-bezier(0.05, 0.5, 0, 1);
    }

    .parallax-rotY {
        transform: translateZ(var(--parallax-translateZ)) rotate3d(0, 1, 0, var(--parallax-rotateY));
        transform-style: preserve-3d;
        transition: transform 1.5s cubic-bezier(0.05, 0.5, 0, 1);
    }

    .z-top {
        z-index: 5000;
    }

    .text-stroke-outer:before {
        content: '';
        position: absolute;
        display: block;
        left: 0;
        top: 0;
        -webkit-text-stroke-width: 16px;
        -webkit-text-stroke-color: theme(colors.red.300);
        z-index: -1;
    }
}

/* barlow-semi-condensed-100 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 100;
    src: url('/fonts/barlow-semi-condensed-v15-latin-100.woff2') format('woff2');
}

/* barlow-semi-condensed-100italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 100;
    src: url('/fonts/barlow-semi-condensed-v15-latin-100italic.woff2') format('woff2');
}

/* barlow-semi-condensed-200 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 200;
    src: url('/fonts/barlow-semi-condensed-v15-latin-200.woff2') format('woff2');
}

/* barlow-semi-condensed-200italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 200;
    src: url('/fonts/barlow-semi-condensed-v15-latin-200italic.woff2') format('woff2');
}

/* barlow-semi-condensed-300 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 300;
    src: url('/fonts/barlow-semi-condensed-v15-latin-300.woff2') format('woff2');
}

/* barlow-semi-condensed-300italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 300;
    src: url('/fonts/barlow-semi-condensed-v15-latin-300italic.woff2') format('woff2');
}

/* barlow-semi-condensed-regular - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/barlow-semi-condensed-v15-latin-regular.woff2') format('woff2');
}

/* barlow-semi-condensed-italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 400;
    src: url('/fonts/barlow-semi-condensed-v15-latin-italic.woff2') format('woff2');
}

/* barlow-semi-condensed-500 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 500;
    src: url('/fonts/barlow-semi-condensed-v15-latin-500.woff2') format('woff2');
}

/* barlow-semi-condensed-500italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 500;
    src: url('/fonts/barlow-semi-condensed-v15-latin-500italic.woff2') format('woff2');
}

/* barlow-semi-condensed-600 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 600;
    src: url('/fonts/barlow-semi-condensed-v15-latin-600.woff2') format('woff2');
}

/* barlow-semi-condensed-600italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 600;
    src: url('/fonts/barlow-semi-condensed-v15-latin-600italic.woff2') format('woff2');
}

/* barlow-semi-condensed-700 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 700;
    src: url('/fonts/barlow-semi-condensed-v15-latin-700.woff2') format('woff2');
}

/* barlow-semi-condensed-700italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 700;
    src: url('/fonts/barlow-semi-condensed-v15-latin-700italic.woff2') format('woff2');
}

/* barlow-semi-condensed-800 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 800;
    src: url('/fonts/barlow-semi-condensed-v15-latin-800.woff2') format('woff2');
}

/* barlow-semi-condensed-800italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 800;
    src: url('/fonts/barlow-semi-condensed-v15-latin-800italic.woff2') format('woff2');
}

/* barlow-semi-condensed-900 - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: normal;
    font-weight: 900;
    src: url('/fonts/barlow-semi-condensed-v15-latin-900.woff2') format('woff2');
}

/* barlow-semi-condensed-900italic - latin */
@font-face {
    font-display: block;
    font-family: 'Barlow Semi Condensed';
    font-style: italic;
    font-weight: 900;
    src: url('/fonts/barlow-semi-condensed-v15-latin-900italic.woff2') format('woff2');
}

/* dm-serif-display-regular - latin */
@font-face {
    font-display: block;
    font-family: 'DM Serif Display';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/dm-serif-display-v15-latin-regular.woff2') format('woff2');
}

/* dm-serif-display-italic - latin */
@font-face {
    font-display: block;
    font-family: 'DM Serif Display';
    font-style: italic;
    font-weight: 400;
    src: url('/fonts/dm-serif-display-v15-latin-italic.woff2') format('woff2');
}

/* protest-strike-regular - latin */
@font-face {
    font-display: block;
    font-family: 'Protest Strike';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/protest-strike-v2-latin-regular.woff2') format('woff2');
}

/* protest-riot-regular - latin */
@font-face {
    font-display: block;
    font-family: 'Protest Riot';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/protest-riot-v2-latin-regular.woff2') format('woff2');
}

/* protest-revolution-regular - latin */
@font-face {
    font-display: block;
    font-family: 'Protest Revolution';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/protest-revolution-v2-latin-regular.woff2') format('woff2');
}

/* besley-regular - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/besley-v19-latin-regular.woff2') format('woff2');
}

/* besley-italic - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: italic;
    font-weight: 400;
    src: url('/fonts/besley-v19-latin-italic.woff2') format('woff2');
}

/* besley-500 - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: normal;
    font-weight: 500;
    src: url('/fonts/besley-v19-latin-500.woff2') format('woff2');
}

/* besley-500italic - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: italic;
    font-weight: 500;
    src: url('/fonts/besley-v19-latin-500italic.woff2') format('woff2');
}

/* besley-600 - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: normal;
    font-weight: 600;
    src: url('/fonts/besley-v19-latin-600.woff2') format('woff2');
}

/* besley-600italic - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: italic;
    font-weight: 600;
    src: url('/fonts/besley-v19-latin-600italic.woff2') format('woff2');
}

/* besley-700 - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: normal;
    font-weight: 700;
    src: url('/fonts/besley-v19-latin-700.woff2') format('woff2');
}

/* besley-700italic - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: italic;
    font-weight: 700;
    src: url('/fonts/besley-v19-latin-700italic.woff2') format('woff2');
}

/* besley-800 - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: normal;
    font-weight: 800;
    src: url('/fonts/besley-v19-latin-800.woff2') format('woff2');
}

/* besley-800italic - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: italic;
    font-weight: 800;
    src: url('/fonts/besley-v19-latin-800italic.woff2') format('woff2');
}

/* besley-900 - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: normal;
    font-weight: 900;
    src: url('/fonts/besley-v19-latin-900.woff2') format('woff2');
}

/* besley-900italic - latin */
@font-face {
    font-display: block;
    font-family: 'Besley';
    font-style: italic;
    font-weight: 900;
    src: url('/fonts/besley-v19-latin-900italic.woff2') format('woff2');
}

/* caveat-regular - latin */
@font-face {
    font-display: block;
    font-family: 'Caveat';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/caveat-v18-latin-regular.woff2') format('woff2');
}

/* caveat-500 - latin */
@font-face {
    font-display: block;
    font-family: 'Caveat';
    font-style: normal;
    font-weight: 500;
    src: url('/fonts/caveat-v18-latin-500.woff2') format('woff2');
}

/* caveat-600 - latin */
@font-face {
    font-display: block;
    font-family: 'Caveat';
    font-style: normal;
    font-weight: 600;
    src: url('/fonts/caveat-v18-latin-600.woff2') format('woff2');
}

/* caveat-700 - latin */
@font-face {
    font-display: block;
    font-family: 'Caveat';
    font-style: normal;
    font-weight: 700;
    src: url('/fonts/caveat-v18-latin-700.woff2') format('woff2');
}

#root {
    @apply w-full overflow-hidden text-left font-barlow text-[--theme-text] scrollbar-track-transparent scrollbar-thumb-neutral-50;
}

/* 
.nav-unchecked-width {
    @apply w-[75dvw] sm:w-[66.666667dvw] md:w-[50dvw] lg:w-[33.333333dvw] xl:w-[25dvw];
}

.nav-checked-width {
    @apply w-[95dvw] sm:w-[90dvw] md:w-[80dvw] lg:w-[75dvw] xl:w-[45dvw];
} */
/* 
.post-width {
    @apply w-[95dvw] sm:w-[90dvw] md:w-[80dvw] lg:w-[75dvw] xl:w-[66.666666dvw];
} */

/* Conditional Classes */

.mrkdwn > p {
    @apply mb-4 last:mb-0 sm:mb-6;
}
/* 
.mrkdwn > p > a {
    @apply link-in-content;
} */

.mrkdwn > h5 {
    @apply headline-skewed-bg;
}

/* SVG Filters */

.shadow-inner-svg {
    filter: url(src/assets/filters.svg#shadow2);
}

.bloom-svg {
    /* filter: saturate(200%) url(src/assets/filters.svg#bloom-svg-filter); */
    @apply [filter:saturate(200%)_url(src/assets/filters.svg#bloom-svg-filter)];
}

@keyframes streak-to-right {
    from {
        @apply z-20 opacity-0;
        transform: translateX(-200%);
    }
    to {
        @apply z-0 opacity-100;
        transform: translateX(0);
    }
}

@keyframes streak-to-left {
    from {
        @apply z-20 opacity-0;
        transform: translateX(200%);
    }
    to {
        @apply z-0 opacity-100;
        transform: translateX(0);
    }
}

@keyframes enter-from-left {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(0%);
    }
}

@keyframes enter-from-right {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(0%);
    }
}

@keyframes text-upwards {
    from {
        @apply origin-top opacity-0;
        transform: translateY(150%);
    }
    to {
        @apply scale-y-100 opacity-100;
        transform: translateY(0%);
    }
}

@keyframes height-to-full {
    from {
        max-height: var(--bar-height);
    }
    to {
        max-height: var(--content-height);
    }
}

@keyframes width-to-full {
    from {
        width: 0%;
    }
    to {
        width: var(--bar-width);
    }
}

@keyframes expand-corners {
    0% {
        clip-path: inset(var(--outside-clip-y) var(--outside-clip-x) var(--outside-clip-y) var(--outside-clip-x));
    }
    25% {
        clip-path: inset(var(--clip-final) var(--outside-clip-x) var(--clip-final) var(--outside-clip-x));
    }
    100% {
        clip-path: inset(var(--clip-final));
    }
}

@keyframes shrink-corners {
    0% {
        clip-path: inset(var(--clip-final));
    }
    75% {
        clip-path: inset(var(--clip-final) var(--outside-clip-x) var(--clip-final) var(--outside-clip-x));
    }
    100% {
        clip-path: inset(var(--outside-clip-y) var(--outside-clip-x) var(--outside-clip-y) var(--outside-clip-x));
    }
}

@keyframes outer-ring {
    0%,
    100% {
        transform: scale3d(1, 1, 1);
    }

    50% {
        transform: scale3d(1.2, 1.05, 1);
        filter: brightness(1.5);
    }
}

@keyframes bg-dash {
    to {
        stroke-dashoffset: 0;
        stroke-dasharray: 0.5;
        stroke-opacity: var(--bg-stroke-max-opacity);
        stroke-width: 0.1;
    }
}
